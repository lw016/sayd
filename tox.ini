[tox]
envlist = tests, docs
isolated_build = True


[pytest]
asyncio_mode = auto


[testenv]
whitelist_externals = poetry
description = Install dependencies

commands =
    poetry install


[testenv:tests]
whitelist_externals = poetry
description = Run tests

commands_pre = 
    poetry run mypy sayd
    poetry run pylint sayd
    poetry run bandit --skip B101 -r sayd

commands =
    poetry run sayd
    poetry run coverage run -m pytest
    poetry run coverage report


[testenv:docs]
description = Invoke sphinx-build to build the docs

commands =
    poetry run sphinx-build -b html docs/source docs/build
